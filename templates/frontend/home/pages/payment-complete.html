{% extends "frontend/layout/master.html" %}

{% block content %}
    <!-- ================================
    START PAYMENT AREA
================================= -->
<section class="payment-area section-bg section-padding">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="form-box payment-received-wrap mb-0">
          <div class="form-title-wrap">
            <div class="step-bar-wrap text-center">
              <ul class="step-bar-list d-flex align-items-center justify-content-around">
                <li class="step-bar flex-grow-1 step-bar-active">
                  <span class="icon-element">1</span>
                  <p class="pt-2 color-text-2">اختر غرفتك</p>
                </li>
                <li class="step-bar flex-grow-1 step-bar-active">
                  <span class="icon-element">2</span>
                  <p class="pt-2 color-text-2">تفاصيل الحجز والدفع</p>
                </li>
                <li class="step-bar flex-grow-1 step-bar-active">
                  <span class="icon-element">3</span>
                  <p class="pt-2 color-text-2">اكتمل الحجز!</p>
                </li>
              </ul>
            </div>
          </div>
          <div class="form-content">
            <div class="payment-received-list">
              <div class="d-flex align-items-center">
                <i class="la la-check icon-element flex-shrink-0 me-3 ms-0"></i>
                <div>
                  <h3 class="title pb-1">شكراً {{ request.user.get_full_name }} ({{ request.user.username }})!</h3>
                  <h3 class="title">تم إنشاء الحجز بنجاح في {{ hotel.name }}.</h3>
                </div>
              </div>
              <ul class="list-items py-4">
                <li>
                    رقم الحوالة: <strong class="text-black">#{{ transfer_number }}</strong>
                 </li>
                <li>
                    اسم صاحب التحويل: <strong class="text-black">{{ transfer_owner_name }}</strong>
                 </li>
                 <li>
                  طريقة الدفع: <strong class="text-black">{{ payment_method.payment_option.method_name }}</strong>
              </li>
                 <li>
                  <strong class="text-black"> تفاصيل الغرف المحجوزة:</strong>
                  <ul>
                      {% for booking in all_bookings %}
                           <li>
                              <h3 class="title">
                               {{ booking.room.name }}

                              </h3>
                             <p>  تسجيل الدخول:  {{ booking.check_in_date|date:"d F Y" }}  تسجيل الخروج:  {{ booking.check_out_date|date:"d F Y" }}</p>
                              <span>  رقم الحجز:  {{ booking.id }}</span>

                              {% comment %} <p><strong> الخدمات الإضافية</strong>
                                <ul>
                                    {% for service in cart_items.shopping_services.all %}
                                        <li>{{ service.services.name }} - <strong>{{ service.services.additional_fee }}</strong></li>
                                    {% endfor %}
                                </ul>
                            </p> {% endcomment %}
                           </li>
                      {% endfor %}
                  </ul>
                </li>
                 
                 <li>
                  <strong class="text-black"> تفاصيل الغرف المحجوزة:</strong>
                  <ul>
                      {% for item in cart_items %}
                           <li>
                              <h3 class="title">
                               {{ item.room_type.name }}

                              </h3>
                             <p>   تسجيل الدخول:  {{ item.check_in_date|date:"d F Y" }}  تسجيل الخروج:  {{ item.check_out_date|date:"d F Y" }}</p>
                              <span>  السعر:  {{ item.Total_price }}</span>
                              <p><strong> الخدمات الإضافية</strong>
                                <ul>
                                    {% for service in item.shopping_services.all %}
                                        <li>{{ service.services.name }} - <strong>{{ service.services.additional_fee }}</strong></li>
                                    {% endfor %}
                                </ul>
                            </p>
                            <p><strong> عدد الغرف</strong>
                                <ul>
                                        <li>{{item.quantity}} 
                                       </li>
                                </ul>
                            </p>
                           </li>
                      {% endfor %}
                  </ul>
                </li>
                
                  
              </ul>
               <div class="section-block my-3"></div>
               <div class="d-flex justify-content-between align-items-center">
                    <h3>المجموع الكلي</h3>
                    <h3>{{ total_price }} ريال</h3>
                  </div>
              <div class="btn-box pb-4">
                <a href="{% url 'payments:user_dashboard_bookings' %}" class="theme-btn mb-2 me-2">عرض حجوزاتي</a>
                <a href="{% url 'home:index' %}" class="theme-btn mb-2 theme-btn-transparent">العودة للرئيسية</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- ================================
    END PAYMENT AREA
================================= -->
{% endblock %}